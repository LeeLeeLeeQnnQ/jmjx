(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ed07"],{"30fa":function(t,e,r){},3884:function(t,e,r){"use strict";r.d(e,"a",function(){return i}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return s});var n=r("66df"),i=function(t){return n["a"].request({url:"/api/Work/index",params:t,method:"get"})},a=function(t){return n["a"].request({url:"/api/Work/getWorkOptionList",params:t,method:"get"})},s=function(t){return n["a"].request({url:"/api/Work/show",params:t,method:"get"})}},"51f2":function(t,e,r){},"7eaf":function(t,e,r){"use strict";var n=r("51f2"),i=r.n(n);i.a},c90b:function(t,e,r){"use strict";var n=r("30fa"),i=r.n(n);i.a},db41:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Card",{attrs:{shadow:""}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.hTitle)+"\n    ")]),r("Collapse",{attrs:{simple:""}},t._l(t.paperList,function(e){return r("Panel",[t._v("\n        "+t._s(e.title)+"\n        "),r("div",{attrs:{slot:"content"},slot:"content"},[r("Paper",{attrs:{subjects:e.subjects,number:e.number,opinion:e.opinion,pictures:e.pictures}})],1)])}))],1)],1)},i=[],a=r("3884"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Card",{attrs:{title:t.number,icon:"md-calendar"}},[r("Modal",{attrs:{title:"预览图"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.visible?r("img",{staticStyle:{width:"100%"},attrs:{src:t.imgUrl}}):t._e()]),r("Card",{attrs:{title:"检查意见",shadow:""}},[r("p",[t._v(t._s(t.opinion))])]),r("Card",{staticStyle:{margin:"3px 0"},attrs:{title:"照片列表",shadow:""}},t._l(t.pictures,function(e){return r("div",{staticClass:"img-upload-list"},[r("img",{attrs:{src:e}}),r("div",{staticClass:"img-upload-list-cover"},[r("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(r){t.handleView(e)}}})],1)])})),r("Card",{attrs:{title:"检查详情",shadow:""}},[r("CellGroup",t._l(t.subjects,function(e){return r("Cell",{staticStyle:{"border-bottom":"1px solid #e8eaec"}},[r("p",[t._v(t._s(e.content))]),1==e.judge?r("Icon",{staticClass:"iconSize",staticStyle:{color:"#19be6b"},attrs:{slot:"extra",type:"md-checkmark"},slot:"extra"}):2==e.judge?r("Icon",{staticClass:"iconSize",staticStyle:{color:"#ed4014"},attrs:{slot:"extra",type:"md-close"},slot:"extra"}):r("Icon",{staticClass:"iconSize",staticStyle:{color:"#2db7f5"},attrs:{slot:"extra",type:"md-help"},slot:"extra"})],1)}))],1)],1)},o=[],l={name:"paper",props:{number:{type:String,default:""},subjects:{type:Array,default:function(){return[]}},opinion:{type:String,default:""},pictures:{type:Array,default:function(){return[]}}},data:function(){return{visible:!1,imgUrl:""}},methods:{handleView:function(t){this.imgUrl=t,this.visible=!0}}},c=l,u=(r("7eaf"),r("2877")),p=Object(u["a"])(c,s,o,!1,null,null,null);p.options.__file="paper.vue";var d=p.exports,f=d,m={name:"kitchen-report",components:{Paper:f},data:function(){return{paperList:[],paper:[],hTitle:""}},methods:{trimNull:function(t){for(var e=0;e<t.length;e++)""!=t[e]&&"undefined"!==typeof t[e]||(t.splice(e,1),e-=1);return t.length>0?t:null},getOnePaper:function(t,e){for(var r=JSON.parse(JSON.stringify(this.paper)),n=e,i=0,a=r.length;i<a;i++){var s=JSON.parse(t.work_option);r[i].judge=s[i],r[i].content=r[i].title,1==s[i]&&(n+=1*r[i].score)}return{newObj:r,num:n}}},created:function(){var t=this,e=this.$route.query.type,r=this.$store.state.user.store_paper;Object(a["c"])({type:e}).then(function(n){var i=n.data;t.paper=i.data,Object(a["b"])({kitchen_id:r.kitchen_id,store_id:r.store_id,work_date:r.work_date}).then(function(r){var n=r.data,i=t;if(0==n.code){t.hTitle=n.data.work_date+" / "+n.data.store_no+" / "+n.data.store_name;var a=n.data.detail||[];a.forEach(function(t,e){var r={};r.title="第"+(e+1)+"次检查 / "+t.create_time+" / "+t.creator_name,r.pictures=i.trimNull(t.images.split(","));var n=i.getOnePaper(t,0);r.subjects=n.newObj,r.number=n.num+"分",r.opinion=t.remark,i.paperList.push(r)})}else{t.$Notice.warning({title:n.msg});var s={name:"kitchen_total_inspect_list",query:{type:e}};t.$router.push(s)}})})}},h=m,v=(r("c90b"),Object(u["a"])(h,n,i,!1,null,null,null));v.options.__file="main.vue";e["default"]=v.exports}}]);