(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18b3"],{"30d9":function(e,t,a){},4974:function(e,t,a){"use strict";var n=a("bbb3"),r=a.n(n);r.a},"90e7":function(e,t,a){"use strict";a.d(t,"l",function(){return r}),a.d(t,"a",function(){return i}),a.d(t,"i",function(){return o}),a.d(t,"e",function(){return s}),a.d(t,"n",function(){return l}),a.d(t,"c",function(){return c}),a.d(t,"j",function(){return u}),a.d(t,"f",function(){return m}),a.d(t,"m",function(){return d}),a.d(t,"b",function(){return p}),a.d(t,"h",function(){return f}),a.d(t,"o",function(){return h}),a.d(t,"d",function(){return _}),a.d(t,"k",function(){return y}),a.d(t,"g",function(){return g});var n=a("66df"),r=function(){return n["a"].request({url:"/api/Kitchen/index",method:"get"})},i=function(e){return n["a"].request({url:"/api/Kitchen/add",data:e,method:"post"})},o=function(e){return n["a"].request({url:"/api/Kitchen/edit",data:e,method:"post"})},s=function(e){return n["a"].request({url:"/api/Kitchen/delete",data:e,method:"post"})},l=function(e){return n["a"].request({url:"/api/KitchenStore/index",params:e,method:"get"})},c=function(e){return n["a"].request({url:"/api/KitchenStore/add",data:e,method:"post"})},u=function(e){return n["a"].request({url:"/api/KitchenStore/edit",data:e,method:"post"})},m=function(e){return n["a"].request({url:"/api/KitchenStore/delete",data:e,method:"post"})},d=function(e){return n["a"].request({url:"/api/KitchenMeter/queryList",data:e,method:"post"})},p=function(e){return n["a"].request({url:"/api/KitchenMeter/add",data:e,method:"post"})},f=function(e){return n["a"].request({url:"/api/KitchenMeter/delete",data:e,method:"post"})},h=function(e){return n["a"].request({url:"/api/WorkCategory/index",params:e,method:"get"})},_=function(e){var t=e;return n["a"].request({url:"/api/WorkCategory/add",data:t,method:"post"})},y=function(e){var t=e;return n["a"].request({url:"/api/WorkCategory/edit",data:t,method:"post"})},g=function(e){var t=e;return n["a"].request({url:"/api/WorkCategory/delete",data:t,method:"post"})}},ad64:function(e,t,a){"use strict";a.d(t,"j",function(){return r}),a.d(t,"k",function(){return i}),a.d(t,"g",function(){return o}),a.d(t,"a",function(){return s}),a.d(t,"o",function(){return l}),a.d(t,"n",function(){return c}),a.d(t,"f",function(){return u}),a.d(t,"m",function(){return m}),a.d(t,"c",function(){return d}),a.d(t,"r",function(){return p}),a.d(t,"e",function(){return f}),a.d(t,"l",function(){return h}),a.d(t,"q",function(){return _}),a.d(t,"b",function(){return y}),a.d(t,"i",function(){return g}),a.d(t,"d",function(){return I}),a.d(t,"h",function(){return w}),a.d(t,"p",function(){return v});var n=a("66df"),r=function(e){return n["a"].request({url:"/api/StoreBill/index",params:e,method:"get"})},i=function(e){return n["a"].request({url:"/api/StoreCharge/queryList",params:e,method:"get"})},o=function(e){return n["a"].request({url:"/api/StoreBill/edit",data:e,method:"post"})},s=function(e){return n["a"].request({url:"/api/StoreCharge/add",data:e,method:"post"})},l=function(e){return e.lease_type="2",n["a"].request({url:"/api/StoreLease/edit",data:e,method:"post"})},c=function(e){return n["a"].request({url:"/api/Meter/queryList",params:e,method:"get"})},u=function(e){return n["a"].request({url:"/api/Meter/edit",data:e,method:"post"})},m=function(e){return n["a"].request({url:"/api/StoreFine/index",data:e,method:"get"})},d=function(e){return n["a"].request({url:"/api/StoreFine/add",data:e,method:"post"})},p=function(e){var t={id:e};return n["a"].request({url:"api/StoreFine/show",data:t,method:"post"})},f=function(e){var t={id:e};return n["a"].request({url:"/api/StoreFine/delete",data:t,method:"post"})},h=function(e){var t={store_id:e};return n["a"].request({url:"/api/StoreEmployee/index",params:t,method:"get"})},_=function(e){var t={store_id:e};return n["a"].request({url:"/api/StoreDevice/show",data:t,method:"post"})},y=function(e){return n["a"].request({url:"/api/StoreEmployee/add",data:e,method:"post"})},g=function(e){return n["a"].request({url:"/api/StoreEmployee/edit",data:e,method:"post"})},I=function(e){var t={id:e};return n["a"].request({url:"/api/StoreEmployee/delete",data:t,method:"post"})},w=function(e){return n["a"].request({url:"/api/StoreDevice/edit",data:e,method:"post"})},v=function(e){var t={store_id:e};return n["a"].request({url:"/api/StoreLease/settle",data:t,method:"post"})}},bbb3:function(e,t,a){},d567:function(e,t,a){},d7a0:function(e,t,a){"use strict";var n=a("d567"),r=a.n(n);r.a},e007:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Modal",{attrs:{title:"账单信息",scrollable:""},model:{value:e.viewModal,callback:function(t){e.viewModal=t},expression:"viewModal"}},[a("Form",{attrs:{"label-width":90}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"店铺名称"}},[a("span",[e._v(e._s(e.viewItem.store_name))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"档口编号"}},[a("span",[e._v(e._s(e.viewItem.store_no))])])],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"账单月份"}},[a("span",[e._v(e._s(e.viewItem.month))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"厨房名称"}},[a("span",[e._v(e._s(e.viewItem.kitchen_name))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"公摊天数"}},[a("span",[e._v(e._s(e.viewItem.day_number))])])],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"收费基数"}},[a("span",[e._v(e._s(e.viewItem.base_number))])])],1),a("Divider"),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12",offset:"8"}},[a("h3",[e._v("费用列表")])])],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"垃圾及隔油池"}},[a("span",[e._v(e._s(e.viewItem.garbage_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"烟道清洗"}},[a("span",[e._v(e._s(e.viewItem.flue_fee))])])],1),a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"消杀"}},[a("span",[e._v(e._s(e.viewItem.kill_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"网络使用费"}},[a("span",[e._v(e._s(e.viewItem.network_fee))])])],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"库房费"}},[a("span",[e._v(e._s(e.viewItem.storage_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"工程增项"}},[a("span",[e._v(e._s(e.viewItem.project_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"罚款"}},[a("span",[e._v(e._s(e.viewItem.fine_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"物业管理费"}},[a("span",[e._v(e._s(e.viewItem.manage_fee))])])],1),a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"卫生费"}},[a("span",[e._v(e._s(e.viewItem.health_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"一次性费用"}},[a("span",[e._v(e._s(e.viewItem.one_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"代收税费"}},[a("span",[e._v(e._s(e.viewItem.taxes_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"滞纳金"}},[a("span",[e._v(e._s(e.viewItem.overdue_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"代运营费"}},[a("span",[e._v(e._s(e.viewItem.operate_fee))])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"其他费用"}},[a("span",[e._v(e._s(e.viewItem.other_fee))])])],1)],1),a("Card",{attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-flash-outline"}}),e._v("\n            电费部分\n        ")],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"公摊电费"}},[a("span",[e._v(e._s(e.viewItem.energy_share_fee))])])],1),a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"店铺电费"}},[a("span",[e._v(e._s(e.viewItem.energy_fee))])])],1)],1)],1),a("Card",{staticStyle:{"margin-top":"4px"},attrs:{shadow:""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"ios-water-outline"}}),e._v("\n            水费部分\n        ")],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"公摊水费"}},[a("span",[e._v(e._s(e.viewItem.water_share_fee))])])],1),a("i-col",{attrs:{span:"12"}},[a("FormItem",{staticClass:"cellTit",attrs:{label:"店铺水费"}},[a("span",[e._v(e._s(e.viewItem.water_fee))])])],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"总计："}},[a("h3",[e._v(e._s(e.viewItem.total))])])],1)],1),a("Divider"),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12",offset:"8"}},[a("h3",[e._v("留言")])]),a("FormItem",{staticClass:"cellTit",attrs:{label:"留言"}},[a("span",[e._v(e._s(e.viewItem.remark))])])],1)],1)],1),a("Card",{staticStyle:{"margin-top":"5px"},attrs:{shadow:""}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"20"}},[a("Select",{staticStyle:{width:"200px","margin-right":"10px"},on:{"on-change":e.selectKitchen},model:{value:e.select_kitchen_id,callback:function(t){e.select_kitchen_id=t},expression:"select_kitchen_id"}},e._l(e.kitchen,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.kitchen_name))])})),a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"month",value:e.select_time,placeholder:"选择月份",format:"yyyy-MM"},on:{"on-change":e.selectDate}})],1)],1),a("Row",{staticStyle:{"margin-top":"5px"},attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{xs:4,md:4,lg:4}},[a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入店铺名称/档口号"},on:{"on-change":e.changeKeyword},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1)],1)],1),a("Card",{attrs:{shadow:""}},[a("Modal",{attrs:{title:"编辑房租","mask-closable":!1},on:{"on-ok":e.editStoreRentBill},model:{value:e.showEditStoreRentBillModal,callback:function(t){e.showEditStoreRentBillModal=t},expression:"showEditStoreRentBillModal"}},[a("Form",{attrs:{model:e.storeRentBill,"label-width":80}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"22"}},[a("FormItem",[a("span",[e._v(e._s(e.storeRentBill.month)+" / "+e._s(e.storeRentBill.store_name))])])],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"房租"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.storeRentBill.rent_fee,callback:function(t){e.$set(e.storeRentBill,"rent_fee",t)},expression:"storeRentBill.rent_fee"}})],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"10"}},[a("FormItem",{attrs:{label:"滞纳金"}},[a("Input",{staticStyle:{width:"200px"},model:{value:e.storeRentBill.rent_overdue_fee,callback:function(t){e.$set(e.storeRentBill,"rent_overdue_fee",t)},expression:"storeRentBill.rent_overdue_fee"}})],1)],1)],1)],1)],1),a("Modal",{attrs:{scrollable:"",fullscreen:""},on:{"on-ok":e.editStoreRunBill},model:{value:e.paymentModal,callback:function(t){e.paymentModal=t},expression:"paymentModal"}},[a("Form",{ref:"paymentForm",attrs:{model:e.paymentItem,"label-width":110}},[a("Card",{staticStyle:{border:"1px solid #2db7f5"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"店铺名称"}},[a("span",[e._v(e._s(e.paymentItem.store_name))])])],1),a("i-col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"档口编号"}},[a("span",[e._v(e._s(e.paymentItem.store_no))])])],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"账单月份"}},[a("span",[e._v(e._s(e.paymentItem.month))])])],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"厨房名称"}},[a("span",[e._v(e._s(e.paymentItem.kitchen_name))])])],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"公摊天数"}},[a("span",[e._v(e._s(e.paymentItem.day_number))])])],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"收费基数"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.base_number,callback:function(t){e.$set(e.paymentItem,"base_number",t)},expression:"paymentItem.base_number"}})],1)],1)],1)],1),a("Card",{staticStyle:{border:"1px solid #2db7f5","margin-top":"5px"},attrs:{title:"周期性费用"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"垃圾及隔油池"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.garbage_fee,callback:function(t){e.$set(e.paymentItem,"garbage_fee",t)},expression:"paymentItem.garbage_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"烟道清洗"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.flue_fee,callback:function(t){e.$set(e.paymentItem,"flue_fee",t)},expression:"paymentItem.flue_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"消杀"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.kill_fee,callback:function(t){e.$set(e.paymentItem,"kill_fee",t)},expression:"paymentItem.kill_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"网络使用费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.network_fee,callback:function(t){e.$set(e.paymentItem,"network_fee",t)},expression:"paymentItem.network_fee"}})],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"库房费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.storage_fee,callback:function(t){e.$set(e.paymentItem,"storage_fee",t)},expression:"paymentItem.storage_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"卫生费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.health_fee,callback:function(t){e.$set(e.paymentItem,"health_fee",t)},expression:"paymentItem.health_fee"}})],1)],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"12"}},[a("Card",{staticStyle:{border:"1px solid #2db7f5","margin-top":"5px"},attrs:{title:"电费"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"公摊电费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.energy_share_fee,callback:function(t){e.$set(e.paymentItem,"energy_share_fee",t)},expression:"paymentItem.energy_share_fee"}})],1),a("FormItem",{attrs:{label:"商户电费"}},[a("Input",{attrs:{readonly:""},model:{value:e.paymentItem.energy_fee,callback:function(t){e.$set(e.paymentItem,"energy_fee",t)},expression:"paymentItem.energy_fee"}})],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"电表起始值"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.energy_start,callback:function(t){e.$set(e.paymentItem,"energy_start",t)},expression:"paymentItem.energy_start"}})],1),a("FormItem",{attrs:{label:"电表结束值"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.energy_end,callback:function(t){e.$set(e.paymentItem,"energy_end",t)},expression:"paymentItem.energy_end"}})],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"电表倍率"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.energy_multiple,callback:function(t){e.$set(e.paymentItem,"energy_multiple",t)},expression:"paymentItem.energy_multiple"}})],1)],1)],1)],1),a("i-col",{attrs:{span:"12"}},[a("Card",{staticStyle:{border:"1px solid #2db7f5","margin-top":"5px"},attrs:{title:"水费"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"公摊水费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.water_share_fee,callback:function(t){e.$set(e.paymentItem,"water_share_fee",t)},expression:"paymentItem.water_share_fee"}})],1),a("FormItem",{attrs:{label:"商户水费"}},[a("Input",{attrs:{readonly:""},model:{value:e.paymentItem.water_fee,callback:function(t){e.$set(e.paymentItem,"water_fee",t)},expression:"paymentItem.water_fee"}})],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"水表起始值"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.water_start,callback:function(t){e.$set(e.paymentItem,"water_start",t)},expression:"paymentItem.water_start"}})],1),a("FormItem",{attrs:{label:"水表结束值"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.water_end,callback:function(t){e.$set(e.paymentItem,"water_end",t)},expression:"paymentItem.water_end"}})],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("FormItem",{attrs:{label:"水表倍率"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.water_multiple,callback:function(t){e.$set(e.paymentItem,"water_multiple",t)},expression:"paymentItem.water_multiple"}})],1)],1)],1)],1)],1),a("Card",{staticStyle:{border:"1px solid #2db7f5","margin-top":"5px"},attrs:{title:"其他"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"工程增项"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.project_fee,callback:function(t){e.$set(e.paymentItem,"project_fee",t)},expression:"paymentItem.project_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"罚款"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.fine_fee,callback:function(t){e.$set(e.paymentItem,"fine_fee",t)},expression:"paymentItem.fine_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"一次性费用"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.one_fee,callback:function(t){e.$set(e.paymentItem,"one_fee",t)},expression:"paymentItem.one_fee"}})],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"滞纳金"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.overdue_fee,callback:function(t){e.$set(e.paymentItem,"overdue_fee",t)},expression:"paymentItem.overdue_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"代运营费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.operate_fee,callback:function(t){e.$set(e.paymentItem,"operate_fee",t)},expression:"paymentItem.operate_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"代收税费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.taxes_fee,callback:function(t){e.$set(e.paymentItem,"taxes_fee",t)},expression:"paymentItem.taxes_fee"}})],1)],1)],1),a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"物业管理费"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.manage_fee,callback:function(t){e.$set(e.paymentItem,"manage_fee",t)},expression:"paymentItem.manage_fee"}})],1)],1),a("i-col",{attrs:{span:"4"}},[a("FormItem",{attrs:{label:"其他费用"}},[a("Input",{on:{"on-change":e.updateComputedPaper},model:{value:e.paymentItem.other_fee,callback:function(t){e.$set(e.paymentItem,"other_fee",t)},expression:"paymentItem.other_fee"}})],1)],1)],1)],1),a("Card",{staticStyle:{border:"1px solid #2db7f5","margin-top":"5px"},attrs:{title:"备注"}},[a("Row",{attrs:{type:"flex",justify:"start",align:"middle",gutter:20}},[a("i-col",{attrs:{span:"20"}},[a("FormItem",{attrs:{label:"备注"}},[a("Input",{attrs:{type:"textarea",rows:4,placeholder:"备注"},model:{value:e.paymentItem.remark,callback:function(t){e.$set(e.paymentItem,"remark",t)},expression:"paymentItem.remark"}})],1)],1)],1)],1),a("Card",{staticStyle:{"margin-top":"5px"}},[a("h3",[e._v("总计："+e._s(e.paymentItem.total))])])],1)],1),a("tables",{attrs:{columns:e.bill_columns},on:{"data-view":e.viewEnergyBill,"data-edit-rent":e.showEditStoreRentBill,"data-edit-run":e.showEditStoreRunBill},model:{value:e.bill_list,callback:function(t){e.bill_list=t},expression:"bill_list"}}),a("Page",{staticStyle:{"margin-top":"10px"},attrs:{total:e.page.total,"page-size":e.page.list_rows},on:{"on-change":e.getNewPage}})],1)],1)},r=[],i=a("fa69"),o=a("90e7"),s=a("ad64"),l={name:"kitchen-kitchen-bill",components:{Tables:i["a"]},data:function(){return{kitchen:[],select_time:"",select_kitchen:[],select_kitchen_id:"",keyword:"",page:{current_page:1,last_page:"",list_rows:0,total:0},bill_columns:[{title:"厨房",key:"kitchen_name"},{title:"月份",key:"month"},{title:"商户",key:"store_name"},{title:"档口号",key:"store_no"},{title:"经营费用",render:function(e,t){var a=t.row.operate_fee,n=t.row.operate_overdue_fee,r=(1*a+1*n).toFixed(2);return e("span",r)}},{title:"房租",render:function(e,t){var a=t.row.rent_fee,n=t.row.rent_overdue_fee,r=(1*a+1*n).toFixed(2);return e("span",r)}},{title:"往期未缴",key:"arrears_fee"},{title:"总未缴款",render:function(e,t){var a=t.row.operate_fee,n=t.row.operate_overdue_fee,r=t.row.rent_fee,i=t.row.rent_overdue_fee,o=t.row.arrears_fee,s=t.row.pay_fee,l=(1*a+1*n+1*r+1*i+1*o-1*s).toFixed(2);return e("span",1*l>1e3?{style:{color:"#ff9900"}}:1*l>0?{style:{color:"#2d8cf0"}}:{style:{color:"#19be6b"}},l)}},{title:"查看",key:"handle",button:[function(e,t,a){return e("Button",{props:{type:"info",size:"small"},on:{click:function(){a.$emit("data-view",t)}}},"经营费用")}]},{title:"编辑",key:"handle",width:180,button:[function(e,t,a){return e("Poptip",{props:{confirm:!0,title:"编辑经营费用！"},on:{"on-ok":function(){a.$emit("data-edit-run",t)}}},[e("Button",{props:{type:"error",size:"small"},style:{marginLeft:"8px"}},"经营费用")])},function(e,t,a){return e("Poptip",{props:{confirm:!0,title:"编辑租金！"},on:{"on-ok":function(){a.$emit("data-edit-rent",t)}}},[e("Button",{props:{type:"error",size:"small"},style:{marginLeft:"8px"}},"租金")])}]}],bill_list:[],storeRentBill:{},showEditStoreRentBillModal:!1,viewModal:!1,viewItem:{},paymentModal:!1,paymentItem:{},energy_record_list:[],water_record_list:[],record_list:[],showInfo:{}}},methods:{selectKitchen:function(){this.initData({month:this.select_time,kitchen_id:this.select_kitchen_id,keyword:this.keyword})},selectDate:function(e){this.select_time=e,this.initData({month:this.select_time,kitchen_id:this.select_kitchen_id,keyword:this.keyword})},changeKeyword:function(){this.initData({month:this.select_time,kitchen_id:this.select_kitchen_id,keyword:this.keyword})},getNewPage:function(e){this.initData({month:this.select_time,kitchen_id:this.select_kitchen_id,keyword:this.keyword,page:e})},showEditStoreRentBill:function(e){this.storeRentBill={},this.storeRentBill.id=e.row.id,this.storeRentBill.rent_fee=e.row.rent_fee,this.storeRentBill.rent_overdue_fee=e.row.rent_overdue_fee,this.storeRentBill.month=e.row.month,this.storeRentBill.store_name=e.row.store_name,this.showEditStoreRentBillModal=!0},editStoreRunBill:function(){var e=this,t={};t.id=this.paymentItem.row.id,t.month=this.paymentItem.row.month,t.operate_fee=(1*this.paymentItem.total-1*this.paymentItem.overdue_fee).toFixed(2),t.operate_overdue_fee=this.paymentItem.overdue_fee,Object(s["g"])(t).then(function(t){var a=t.data;0==a.code?(delete e.paymentItem.create_time,delete e.paymentItem.update_time,delete e.paymentItem.id,Object(s["a"])(e.paymentItem).then(function(t){var a=t.data;0==a.code?(e.$Notice.warning({title:"修改成功！"}),e.initData({month:e.select_time,kitchen_id:e.select_kitchen_id,keyword:e.keyword,page:e.page.current_page})):e.$Notice.warning({title:a.msg})})):e.$Notice.warning({title:a.msg})})},editStoreRentBill:function(){var e=this;isNaN(1*this.storeRentBill.rent_fee)?this.$Notice.warning({title:"房租非数字！"}):isNaN(1*this.storeRentBill.rent_overdue_fee)?this.$Notice.warning({title:"房租滞纳金非法！"}):Object(s["g"])(this.storeRentBill).then(function(t){var a=t.data;0==a.code?(e.$Notice.warning({title:"修改成功！"}),e.initData({month:e.select_time,kitchen_id:e.select_kitchen_id,keyword:e.keyword,page:e.page.current_page})):e.$Notice.warning({title:a.msg})})},viewEnergyBill:function(e){var t=this;this.viewItem={};var a=e.row.store_id,n={month:this.select_time,kitchen_id:this.select_kitchen_id,store_id:a};Object(s["k"])(n).then(function(e){var a=e.data;0==a.code?a.data.length>0?(t.viewItem={},t.viewItem=a.data[0],t.viewItem.water_value=t.viewItem.water_start-t.viewItem.water_end,t.viewItem.energy_value=t.viewItem.water_value-t.viewItem.energy_end,t.viewItem.total=t.getPayItemTotal(t.viewItem),t.viewModal=!0):t.$Notice.warning({title:"抄表记录不完善！"}):t.$Notice.warning({title:a.msg})})},getPayItemTotal:function(e){var t=0;return t=1*e.garbage_fee+t,t=1*e.water_fee+t,t=1*e.energy_fee+t,t=1*e.water_share_fee+t,t=1*e.energy_share_fee+t,t=1*e.flue_fee+t,t=1*e.kill_fee+t,t=1*e.network_fee+t,t=1*e.storage_fee+t,t=1*e.health_fee+t,t=1*e.fine_fee+t,t=1*e.one_fee+t,t=1*e.other_fee+t,t=1*e.operate_fee+t,t=1*e.project_fee+t,t=1*e.taxes_fee+t,t=1*e.overdue_fee+t,t.toFixed(2)},getStoreBillList:function(e){var t=this;Object(s["j"])(e).then(function(e){var a=e.data;t.page=a.data.page,0==a.code?a.data.list?t.bill_list=a.data.list:t.bill_list=[]:t.$Notice.warning({title:a.msg})})},showEditStoreRunBill:function(e){var t=this,a=e.row.store_id,n={month:this.select_time,kitchen_id:this.select_kitchen_id,store_id:a};Object(s["k"])(n).then(function(a){var n=a.data;0==n.code?n.data.length>0?t.buildPayment(n.data[0],e):t.$Notice.warning({title:"抄表信息不全！"}):t.$Notice.warning({title:n.msg})})},buildPayment:function(e,t){this.paymentItem={},this.paymentItem=e,this.paymentItem.row=t.row,this.paymentItem.total=this.getPayItemTotal(e),this.paymentModal=!0},getDayMany:function(e,t){var a=new Date(e,t,0);return a.getDate()},computedPaper:function(e){var t=1*e.base_number;e.day_number;isNaN(e.water_start)||e.water_start<0||isNaN(e.water_end)||e.water_end<0?e.water_fee=0:1*e.water_start>1*e.water_end?e.water_fee=0:(e.water_value=(1*e.water_end-1*e.water_start).toFixed(2),e.water_fee=(1*e.water_value*t*this.showInfo.water_fee*1*e.water_multiple).toFixed(2)),isNaN(e.energy_start)||e.energy_start<0||isNaN(e.energy_end)||e.energy_end<0?e.energy_fee=0:1*e.energy_start>1*e.energy_end?e.energy_fee=0:(e.energy_value=(1*e.energy_end-1*e.energy_start).toFixed(2),e.energy_fee=(1*e.energy_value*t*this.showInfo.energy_fee*1*e.energy_multiple).toFixed(2)),e.total="",e.total=this.getPayItemTotal(e),this.paymentModal=!0},updateComputedPaper:function(){this.paymentModal=!1,this.computedPaper(this.paymentItem)},initBaseData:function(e){this.showInfo={},this.showInfo.garbage_fee=e.garbage_fee,this.showInfo.flue_fee=e.flue_fee,this.showInfo.kill_fee=e.kill_fee,this.showInfo.network_fee=e.network_fee,this.showInfo.water_fee=e.water_fee,this.showInfo.energy_fee=e.energy_fee,this.showInfo.storage_fee=e.storage_fee,this.showInfo.health_fee=e.health_fee,this.showInfo.store_count=e.store_count},initData:function(e){this.initBaseData(this.select_kitchen),this.getStoreBillList(e)}},created:function(){var e=this,t=(new Date).getFullYear(),a=(new Date).getMonth()+1+"";a=a<10?"0"+a:a,this.select_time=t+"-"+a,Object(o["l"])().then(function(t){var a=t.data;e.kitchen=a.data.list||[],e.select_kitchen=e.kitchen[1*e.kitchen.length-1],e.select_kitchen_id=e.select_kitchen.id,e.initData({month:e.select_time,kitchen_id:e.select_kitchen_id})})},computed:{}},c=l,u=(a("d7a0"),a("2877")),m=Object(u["a"])(c,n,r,!1,null,null,null);m.options.__file="main.vue";t["default"]=m.exports},fa69:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.searchable&&"top"===e.searchPlace?a("div",{staticClass:"search-con search-con-top"},[a("Select",{staticClass:"search-col",model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},e._l(e.columns,function(t){return"handle"!==t.key?a("Option",{key:"search-col-"+t.key,attrs:{value:t.key}},[e._v(e._s(t.title))]):e._e()})),a("Input",{staticClass:"search-input",attrs:{clearable:"",placeholder:"输入关键字搜索"},on:{"on-change":e.handleClear},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("Button",{staticClass:"search-btn",attrs:{type:"primary"},on:{click:e.handleSearch}},[a("Icon",{attrs:{type:"search"}}),e._v("  查找")],1)],1):e._e(),a("Table",{ref:"tablesMain",attrs:{data:e.insideTableData,columns:e.insideColumns,stripe:e.stripe,border:e.border,"show-header":e.showHeader,width:e.width,height:e.height,loading:e.loading,"disabled-hover":e.disabledHover,"highlight-row":e.highlightRow,"row-class-name":e.rowClassName,size:e.size,"no-data-text":e.noDataText,"no-filtered-data-text":e.noFilteredDataText},on:{"on-current-change":e.onCurrentChange,"on-select":e.onSelect,"on-select-cancel":e.onSelectCancel,"on-select-all":e.onSelectAll,"on-selection-change":e.onSelectionChange,"on-sort-change":e.onSortChange,"on-filter-change":e.onFilterChange,"on-row-click":e.onRowClick,"on-row-dblclick":e.onRowDblclick,"on-expand":e.onExpand}},[e._t("header",null,{slot:"header"}),e._t("footer",null,{slot:"footer"}),e._t("loading",null,{slot:"loading"})],2),e.searchable&&"bottom"===e.searchPlace?a("div",{staticClass:"search-con search-con-top"},[a("Select",{staticClass:"search-col",model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},e._l(e.columns,function(t){return"handle"!==t.key?a("Option",{key:"search-col-"+t.key,attrs:{value:t.key}},[e._v(e._s(t.title))]):e._e()})),a("Input",{staticClass:"search-input",attrs:{placeholder:"输入关键字搜索"},model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}}),a("Button",{staticClass:"search-btn",attrs:{type:"primary"}},[a("Icon",{attrs:{type:"search"}}),e._v("  搜索")],1)],1):e._e(),a("a",{staticStyle:{display:"none",width:"0px",height:"0px"},attrs:{id:"hrefToExportTable"}})],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tables-edit-outer"},[e.isEditting?a("div",{staticClass:"tables-editting-con"},[a("Input",{staticClass:"tables-edit-input",attrs:{value:e.value},on:{input:e.handleInput}}),a("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:e.saveEdit}},[a("Icon",{attrs:{type:"md-checkmark"}})],1),a("Button",{staticStyle:{padding:"6px 4px"},attrs:{type:"text"},on:{click:e.canceltEdit}},[a("Icon",{attrs:{type:"md-close"}})],1)],1):a("div",{staticClass:"tables-edit-con"},[a("span",{staticClass:"value-con"},[e._v(e._s(e.value))]),e.editable?a("Button",{staticClass:"tables-edit-btn",staticStyle:{padding:"2px 4px"},attrs:{type:"text"},on:{click:e.startEdit}},[a("Icon",{attrs:{type:"md-create"}})],1):e._e()],1)])},o=[],s={name:"TablesEdit",props:{value:[String,Number],edittingCellId:String,params:Object,editable:Boolean},computed:{isEditting:function(){return this.edittingCellId==="editting-".concat(this.params.index,"-").concat(this.params.column.key)}},methods:{handleInput:function(e){this.$emit("input",e)},startEdit:function(){this.$emit("on-start-edit",this.params)},saveEdit:function(){this.$emit("on-save-edit",this.params)},canceltEdit:function(){this.$emit("on-cancel-edit",this.params)}}},l=s,c=(a("4974"),a("2877")),u=Object(c["a"])(l,i,o,!1,null,null,null);u.options.__file="edit.vue";var m=u.exports,d={delete:function(e,t,a){return e("Poptip",{props:{confirm:!0,title:"你确定要删除吗?"},on:{"on-ok":function(){a.$emit("on-delete",t),a.$emit("input",t.tableData.filter(function(e,a){return a!==t.row.initRowIndex}))}}},[e("Button",{props:{type:"text",ghost:!0}},[e("Icon",{props:{type:"md-trash",size:18,color:"#000000"}})])])}},p=d,f=(a("30d9"),{name:"Tables",props:{value:{type:Array,default:function(){return[]}},columns:{type:Array,default:function(){return[]}},size:String,width:{type:[Number,String]},height:{type:[Number,String]},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},showHeader:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClassName:{type:Function,default:function(){return""}},context:{type:Object},noDataText:{type:String},noFilteredDataText:{type:String},disabledHover:{type:Boolean},loading:{type:Boolean,default:!1},editable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!1},searchPlace:{type:String,default:"top"}},data:function(){return{insideColumns:[],insideTableData:[],edittingCellId:"",edittingText:"",searchValue:"",searchKey:""}},methods:{suportEdit:function(e,t){var a=this;return e.render=function(e,t){return e(m,{props:{params:t,value:a.insideTableData[t.index][t.column.key],edittingCellId:a.edittingCellId,editable:a.editable},on:{input:function(e){a.edittingText=e},"on-start-edit":function(e){a.edittingCellId="editting-".concat(e.index,"-").concat(e.column.key),a.$emit("on-start-edit",e)},"on-cancel-edit":function(e){a.edittingCellId="",a.$emit("on-cancel-edit",e)},"on-save-edit":function(e){a.value[e.row.initRowIndex][e.column.key]=a.edittingText,a.$emit("input",a.value),a.$emit("on-save-edit",Object.assign(e,{value:a.edittingText})),a.edittingCellId=""}}})},e},surportHandle:function(e){var t=this,a=e.options||[],n=[];a.forEach(function(e){p[e]&&n.push(p[e])});var r=e.button?[].concat(n,e.button):n;return e.render=function(e,a){return a.tableData=t.value,e("div",r.map(function(n){return n(e,a,t)}))},e},handleColumns:function(e){var t=this;this.insideColumns=e.map(function(e,a){var n=e;return n.editable&&(n=t.suportEdit(n,a)),"handle"===n.key&&(n=t.surportHandle(n)),n})},setDefaultSearchKey:function(){this.searchKey="handle"!==this.columns[0].key?this.columns[0].key:this.columns.length>1?this.columns[1].key:""},handleClear:function(e){""===e.target.value&&(this.insideTableData=this.value)},handleSearch:function(){var e=this;this.insideTableData=this.value.filter(function(t){return t[e.searchKey].toString().indexOf(e.searchValue)>-1})},handleTableData:function(){this.insideTableData=this.value.map(function(e,t){var a=e;return a.initRowIndex=t,a})},exportCsv:function(e){this.$refs.tablesMain.exportCsv(e)},clearCurrentRow:function(){this.$refs.talbesMain.clearCurrentRow()},onCurrentChange:function(e,t){this.$emit("on-current-change",e,t)},onSelect:function(e,t){this.$emit("on-select",e,t)},onSelectCancel:function(e,t){this.$emit("on-select-cancel",e,t)},onSelectAll:function(e){this.$emit("on-select-all",e)},onSelectionChange:function(e){this.$emit("on-selection-change",e)},onSortChange:function(e,t,a){this.$emit("on-sort-change",e,t,a)},onFilterChange:function(e){this.$emit("on-filter-change",e)},onRowClick:function(e,t){this.$emit("on-row-click",e,t)},onRowDblclick:function(e,t){this.$emit("on-row-dblclick",e,t)},onExpand:function(e,t){this.$emit("on-expand",e,t)}},watch:{columns:function(e){this.handleColumns(e),this.setDefaultSearchKey()},value:function(e){this.handleTableData(),this.searchable&&this.handleSearch()}},mounted:function(){this.handleColumns(this.columns),this.setDefaultSearchKey(),this.handleTableData()}}),h=f,_=Object(c["a"])(h,n,r,!1,null,null,null);_.options.__file="tables.vue";var y=_.exports;t["a"]=y}}]);